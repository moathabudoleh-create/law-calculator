<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبة الحقوق العمالية</title>
    <!-- Google AdSense Code -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3772059497395785"
     crossorigin="anonymous"></script> 
    <!-- End AdSense Code -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f0f4f8;
            direction: rtl;
        }
        .input-group label {
            transition: color 0.3s ease;
        }
        .input-group input[type="radio"]:checked + label {
            color: #1d4ed8;
            font-weight: bold;
        }
        /* Style for disabled checkbox */
        #fixedTerm:disabled + label {
            color: #9ca3af; /* Gray out text */
            cursor: not-allowed;
        }
        /* New style for date validation error border */
        .date-error-border {
            border-color: #ef4444 !important; /* Tailwind red-500 */
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3) !important;
        }
    </style>
    <!-- تم إزالة MathJax لأننا لن نستخدم صيغ LaTeX -->
</head>
<body class="p-4 sm:p-8 bg-gray-100 min-h-screen flex items-center justify-center">

    <div class="bg-white rounded-xl shadow-lg p-6 sm:p-10 w-full max-w-2xl border border-gray-200">
        
        <h1 class="text-3xl font-bold text-center text-blue-800 mb-6">حاسبة الحقوق العمالية</h1>
        <p class="text-center text-gray-600 mb-8">
            بناءً على قانون العمل الأردني. أدخل معلوماتك لحساب مستحقاتك.
        </p>

        <!-- Input Section -->
        <div class="space-y-6">
            <!-- Salary Input Type Selection -->
            <div class="input-group">
                <p class="block text-sm font-medium text-gray-700 mb-2">نوع الأجر:</p>
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="flex items-center">
                        <input type="radio" id="monthly" name="salaryType" value="monthly" checked class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="monthly" class="ml-2 block text-sm font-medium text-gray-700 cursor-pointer">راتب شهري</label>
                    </div>
                    <div class="flex items-center">
                        <input type="radio" id="daily" name="salaryType" value="daily" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="daily" class="ml-2 block text-sm font-medium text-gray-700 cursor-pointer">أجر يومي</label>
                    </div>
                </div>
            </div>

            <!-- Salary Input Field -->
            <div>
                <label for="salaryInput" id="salaryLabel" class="block text-sm font-medium text-gray-700">الراتب الشهري الأخير (دينار)</label>
                <input type="number" id="salaryInput" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out" placeholder="أدخل راتبك الشهري">
            </div>

            <div class="space-y-4">
                <p class="block text-sm font-bold text-gray-700">مدة الخدمة</p>
                <div class="mt-4 space-y-4">
                    <div>
                        <label for="startDate" class="block text-sm font-medium text-gray-700">تاريخ بداية العمل</label>
                        <input type="date" id="startDate" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
                    </div>
                    <div>
                        <label for="endDate" class="block text-sm font-medium text-gray-700">تاريخ نهاية العمل</label>
                        <input type="date" id="endDate" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
                    </div>
                    <div id="contractEndDateInput" class="hidden bg-blue-50 p-3 rounded-md border border-blue-200">
                        <label for="contractEndDate" class="block text-sm font-medium text-blue-700">تاريخ نهاية العقد</label>
                        <input type="date" id="contractEndDate" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
                    </div>
                    <!-- مدة الخدمة المحتسبة -->
                    <div id="serviceDurationDisplay" class="hidden bg-blue-50 p-3 rounded-md border border-blue-200">
                        <p class="text-sm font-medium text-blue-700">مدة الخدمة المحتسبة:</p>
                        <p class="text-base text-blue-900 font-bold mt-1" id="calculatedDuration"></p>
                    </div>
                    <!-- المدة المتبقية في العقد (جديد) -->
                    <div id="remainingContractDurationDisplay" class="hidden bg-red-50 p-3 rounded-md border border-red-200">
                        <p class="text-sm font-medium text-red-700">المدة المتبقية في العقد:</p>
                        <p class="text-base text-red-900 font-bold mt-1" id="calculatedRemainingDuration"></p>
                    </div>
                    <!-- New section for calculated leave days with an editable input field -->
                    <div id="calculatedLeaveDaysDisplay" class="hidden bg-blue-50 p-3 rounded-md border border-blue-200">
                        <label for="calculatedLeaveDays" class="text-sm font-medium text-blue-700">
                            عدد أيام الإجازات السنوية المحتسبة (بحد أقصى سنتين - يمكنك التعديل):
                        </label>
                        <input type="number" id="calculatedLeaveDays" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
                    </div>
                    <div id="overtimeDaysPerYearDisplay" class="hidden bg-blue-50 p-3 rounded-md border border-blue-200">
                        <label for="overtimeDaysPerYear" class="text-sm font-medium text-blue-700">
                            عدد أيام العمل الإضافي خلال آخر سنتين (يمكنك التعديل):
                        </label>
                        <input type="number" id="overtimeDaysPerYear" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
                    </div>
                </div>
            </div>
            
            <div class="flex items-center">
                <input type="checkbox" id="socialSecurity" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="socialSecurity" class="ml-2 block text-sm font-medium text-gray-700">مشترك في الضمان الاجتماعي</label>
            </div>

            <div class="flex items-center">
                <input type="checkbox" id="arbitraryDismissal" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="arbitraryDismissal" class="ml-2 block text-sm font-medium text-gray-700">فصل تعسفي (عقد غير محدد المدة)</label>
            </div>
            
            <div class="flex items-center">
                <input type="checkbox" id="fixedTerm" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="fixedTerm" class="ml-2 block text-sm font-medium text-gray-700">فصل تعسفي (عقد محدد المدة)</label>
            </div>

            <!-- Notice Compensation Entitlement (تم تبسيط النص) -->
            <div class="flex items-center">
                <input type="checkbox" id="noticeCompensationEntitlement" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="noticeCompensationEntitlement" class="ml-2 block text-sm font-medium text-gray-700">يستحق بدل شهر الإشعار</label>
            </div>
            
            <!-- Overtime Input Group -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">العمل الإضافي</label>
                <div class="flex items-end space-x-2 space-x-reverse">
                    <div class="flex-grow">
                        <label for="overtimeHoursPerDay" class="block text-sm font-medium text-gray-700">ساعات العمل اليومي الإضافية</label>
                        <input type="number" id="overtimeHoursPerDay" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out" placeholder="أدخل عدد الساعات">
                    </div>
                    <div class="flex-shrink-0 w-28">
                        <label for="overtimeRate" class="block text-sm font-medium text-gray-700">النسبة (%)</label>
                        <input type="number" id="overtimeRate" value="125" class="mt-1 block w-full px-2 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-center">
                    </div>
                </div>
            </div>

            <!-- Holiday and Friday Input Group (now separated) -->
            <label class="block text-sm font-bold text-gray-700 mb-1">العمل في العطل والأعياد وأيام الجمع</label>
            <div class="space-y-4">
                <!-- Holiday Input Group -->
                <div class="flex items-end space-x-4 space-x-reverse">
                    <div class="flex-1">
                        <label for="holidayDays" class="block text-sm font-medium text-gray-700">أيام العطل الرسمية</label>
                        <input type="number" id="holidayDays" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out" placeholder="عدد الأيام">
                    </div>
                    <div class="flex-shrink-0 w-28">
                        <label for="holidayRate" class="block text-sm font-medium text-gray-700">النسبة (%)</label>
                        <input type="number" id="holidayRate" value="150" class="mt-1 block w-full px-2 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-center">
                    </div>
                </div>
                <!-- Friday Input Group -->
                <div class="flex items-end space-x-4 space-x-reverse">
                    <div class="flex-1">
                        <label for="fridayDays" class="block text-sm font-medium text-gray-700">أيام الجمع</label>
                        <input type="number" id="fridayDays" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out" placeholder="عدد الأيام">
                    </div>
                    <div class="flex-shrink-0 w-28">
                        <label for="fridayRate" class="block text-sm font-medium text-gray-700">النسبة (%)</label>
                        <input type="number" id="fridayRate" value="150" class="mt-1 block w-full px-2 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-center">
                    </div>
                </div>
            </div>

        </div>

        <!-- Action Buttons (Now side-by-side using flex) -->
        <div class="mt-8 flex gap-4">
            <button onclick="calculateRights()" class="w-1/2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                احسب المستحقات
            </button>
            <button onclick="resetFields()" class="w-1/2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                تفريغ جميع الحقول
            </button>
        </div>


        <!-- Results Section -->
        <div id="results" class="mt-8 space-y-4">
            <h2 class="text-2xl font-bold text-blue-800 border-b pb-2 mb-4">النتائج</h2>

            <div id="serviceAward" class="hidden">
                <h3 class="font-semibold text-lg text-gray-800">مكافأة نهاية الخدمة:</h3>
                <p class="text-green-600 text-xl font-bold mt-1" id="serviceAwardAmount"></p>
                <p class="text-sm text-gray-500 mt-1">
                    * يتم احتساب المكافأة للعاملين الذين **ليسوا مشتركين في الضمان الاجتماعي** كما يلي:
                    <br>
                    * للعاملين براتب شهري: راتب شهر عن كل سنة خدمة كاملة، واحتساب كسور السنة على أساس تقسيم الراتب الشهري على 365 يوماً ثم ضربه بعدد أيام كسور السنة.
                    <br>
                    * للعاملين بأجر يومي: يُحتسب راتب شهر (30 يوماً) عن كل سنة خدمة كاملة، ويُحتسب بدل كسور السنة على أساس الأجر اليومي مضروباً بعدد أيام الخدمة الفعلية في كسر السنة.
                </p>
            </div>

            <div id="dismissalCompensation" class="hidden">
                <h3 class="font-semibold text-lg text-gray-800">بدل الفصل التعسفي:</h3>
                <p class="text-green-600 text-xl font-bold mt-1" id="dismissalCompensationAmount"></p>
                <p class="text-sm text-gray-500 mt-1">
                    * يتم احتساب التعويض كالآتي:
                    <br>
                    * **للعقد غير محدد المدة:** يُحتسب نصف راتب شهري عن كل سنة من سنوات الخدمة، بحد أدنى راتب شهرين.
                    <br>
                    * **للعقد محدد المدة:** يُحتسب بضرب الراتب الشهري في عدد الأشهر المتبقية من العقد.
                </p>
            </div>

            <div id="noticeMonthCompensation" class="hidden">
                <h3 class="font-semibold text-lg text-gray-800">بدل شهر الإشعار:</h3>
                <p class="text-green-600 text-xl font-bold mt-1" id="noticeMonthCompensationAmount"></p>
                <p class="text-sm text-gray-500 mt-1">
                    *يُحتسب بدل الإشعار بمبلغ يعادل راتب شهر واحد، ويُقدر بـ الأجر اليومي مضروباً في 30 يوماً.
                </p>
            </div>
            
            <div id="leaveCompensation" class="hidden">
                <h3 class="font-semibold text-lg text-gray-800">بدل الإجازات السنوية:</h3>
                <p class="text-green-600 text-xl font-bold mt-1" id="leaveCompensationAmount"></p>
                <p class="text-sm text-gray-500 mt-1">
                    * يتم حسابها بضرب عدد أيام الإجازات المستحقة في الأجر اليومي، وبمجموع لا يتجاوز **آخر سنتين** من الخدمة.
                    <br>
                    * تطبق معادلة احتساب الإجازات بشكل نسبي (كسور السنة) باستخدام **365 يوماً**، والنتيجة النهائية لعدد الأيام يتم **تقريبها لأقرب عدد صحيح**.
                </p>
            </div>
            
            <div id="overtimeCompensationDiv" class="hidden">
                <h3 class="font-semibold text-lg text-gray-800">بدل ساعات العمل الإضافي:</h3>
                <p class="text-green-600 text-xl font-bold mt-1" id="overtimeCompensationAmount"></p>
                <p class="text-sm text-gray-500 mt-1">
                    *يُحتسب البدل عن مجموع الساعات الإضافية التي لم تُدفع لآخر سنتين، بضرب عدد الساعات الإضافية الإجمالي في أجر الساعة العادية، ثم ضربه بنسبة الزيادة المئوية المحددة (النسبة الافتراضية هي <span id="overtimeRateDisplay">125%</span>).
                </p>
            </div>

            <div id="holidayCompensationDiv" class="hidden">
                <h3 class="font-semibold text-lg text-gray-800">بدل دوام العطل والأعياد وأيام الجمع:</h3>
                <p class="text-green-600 text-xl font-bold mt-1" id="holidayCompensationAmount"></p>
                <p class="text-sm text-gray-500 mt-1">
                    * يُحتسب البدل عن الأيام التي لم تُدفع لآخر سنتين بضرب عدد الأيام في الأجر اليومي، ثم ضرب الناتج في النسبة المئوية المحددة (النسبة الافتراضية هي <span id="holidayRateDisplay">150%</span> للعطل و <span id="fridayRateDisplay">150%</span> لأيام الجمع). ويُدفع هذا البدل **بالإضافة إلى الأجر اليومي الأساسي**.
                </p>
            </div>

            <div id="total" class="hidden">
                <h3 class="font-semibold text-lg text-gray-800 mt-6">إجمالي المستحقات:</h3>
                <p class="text-blue-600 text-2xl font-bold mt-1" id="totalAmount"></p>
            </div>
            
            <div id="calculation-notes" class="hidden mt-6 text-sm text-gray-600 border-t pt-4">
                <h4 class="font-semibold mb-2">ملاحظات على الحساب:</h4>
                <ul class="list-disc list-inside space-y-1">
                    <li id="daily-wage-note" class="hidden">لاحتساب بدلات الفصل التعسفي وشهر الإنذار للعاملين بأجر يومي، تم تقدير الراتب الشهري على أساس الأجر اليومي مضروباً في 30 يوماً.</li>
                    <li id="daily-award-note" class="hidden">تم احتساب مكافأة نهاية الخدمة لعمال المياومة بضرب الأجر اليومي في 30 لكل سنة خدمة كاملة، بالإضافة إلى أجر كسور السنة المحسوبة على أساس **الأيام الفعلية** في كسر السنة.</li>
                </ul>
            </div>
            
            <!-- Contact and Copyright Info (Updated as requested) -->
            <div class="mt-6 pt-4 border-t border-gray-200 text-center text-sm text-gray-500">
                <p class="text-gray-700 font-semibold mb-1">المحامي معاذ ابو دوله هاتف 0788898842</p>
                <hr class="my-2 border-gray-300 w-1/2 mx-auto" />
                <p class="text-xs">حقوق الملكية محفوظة</p>
            </div>
            
            <div id="error-message" class="hidden bg-red-100 text-red-700 p-4 rounded-md mt-4">
                <p>الرجاء إدخال راتب شهري أو يومي ومدة خدمة صالحة.</p>
            </div>
            <div id="message-box" class="hidden bg-blue-100 text-blue-700 p-4 rounded-md mt-4"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const salaryTypeRadios = document.getElementsByName('salaryType');
            const salaryLabel = document.getElementById('salaryLabel');
            const salaryInput = document.getElementById('salaryInput');
            const fixedTermCheckbox = document.getElementById('fixedTerm');
            const arbitraryDismissalCheckbox = document.getElementById('arbitraryDismissal');
            const contractEndDateInputDiv = document.getElementById('contractEndDateInput');
            const startDateInput = document.getElementById('startDate');
            const endDateInput = document.getElementById('endDate');

            // Initial setup for fixedTerm on load (assumes monthly is checked initially)
            fixedTermCheckbox.disabled = false;

            salaryTypeRadios.forEach(radio => {
                radio.addEventListener('change', () => {
                    const isDaily = radio.value === 'daily';
                    
                    if (radio.value === 'monthly') {
                        salaryLabel.innerText = 'الراتب الشهري الأخير (دينار)';
                        salaryInput.placeholder = 'أدخل راتبك الشهري';
                    } else {
                        salaryLabel.innerText = 'الأجر اليومي الأخير (دينار)';
                        salaryInput.placeholder = 'أدخل أجرك اليومي';
                    }

                    // تطبيق منطق التعطيل (Disabling Logic)
                    if (isDaily) {
                        fixedTermCheckbox.disabled = true;
                        fixedTermCheckbox.checked = false; // إلغاء تحديدها إذا كانت محددة
                        contractEndDateInputDiv.classList.add('hidden'); // إخفاء حقل نهاية العقد
                    } else {
                        fixedTermCheckbox.disabled = false;
                    }
                    // بغض النظر عن نوع الأجر، يتم تحديث العرض وإزالة/إظهار الحدود
                    updateDurationAndLeaveAndOvertimeDisplay(); 
                });
            });

            fixedTermCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    contractEndDateInputDiv.classList.remove('hidden');
                    arbitraryDismissalCheckbox.checked = false;
                } else {
                    contractEndDateInputDiv.classList.add('hidden');
                }
                updateDurationAndLeaveAndOvertimeDisplay(); // تحديث العرض عند تغيير حالة المربع
            });

            arbitraryDismissalCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    fixedTermCheckbox.checked = false;
                    contractEndDateInputDiv.classList.add('hidden');
                }
                updateDurationAndLeaveAndOvertimeDisplay(); // تحديث العرض عند تغيير حالة المربع
            });

            // 1. المستمع لتاريخ البداية (لتحديث المدة فقط)
            startDateInput.addEventListener('change', updateDurationAndLeaveAndOvertimeDisplay);
            
            // 2. المستمع لتاريخ النهاية (للتأكد من صحة التواريخ عند المغادرة)
            // الآن الحد الأحمر يظهر فقط عند 'blur'
            endDateInput.addEventListener('blur', checkDateValidityAndDisplay);
            // change يبقى لتحديث المدة والعروض الأخرى فورًا عند اختيار التاريخ
            endDateInput.addEventListener('change', updateDurationAndLeaveAndOvertimeDisplay); 
            
            // المستمع لتاريخ نهاية العقد (لتحديث المدة المتبقية)
            document.getElementById('contractEndDate').addEventListener('change', updateDurationAndLeaveAndOvertimeDisplay);
            
            // Update rate display in the results description when input changes
            document.getElementById('overtimeRate').addEventListener('input', () => {
                document.getElementById('overtimeRateDisplay').innerText = document.getElementById('overtimeRate').value + '%';
            });
            document.getElementById('holidayRate').addEventListener('input', () => {
                document.getElementById('holidayRateDisplay').innerText = document.getElementById('holidayRate').value + '%';
            });
            document.getElementById('fridayRate').addEventListener('input', () => {
                document.getElementById('fridayRateDisplay').innerText = document.getElementById('fridayRate').value + '%';
            });
        });
        
        /**
         * دالة للتحقق من صحة التواريخ وتطبيق/إزالة الحد الأحمر
         * تُستدعى حصرياً عند مغادرة حقل endDate (حدث blur).
         */
        function checkDateValidityAndDisplay() {
            const startDateInput = document.getElementById('startDate');
            const endDateInput = document.getElementById('endDate');
            const startDateStr = startDateInput.value;
            const endDateStr = endDateInput.value;

            // إزالة حدود الخطأ السابقة
            startDateInput.classList.remove('date-error-border');
            endDateInput.classList.remove('date-error-border');

            if (startDateStr && endDateStr) {
                const startDate = new Date(startDateStr);
                const endDate = new Date(endDateStr);

                // التحقق من صحة التواريخ (تاريخ النهاية يجب أن يكون بعد تاريخ البداية)
                if (startDate > endDate) {
                    startDateInput.classList.add('date-error-border');
                    endDateInput.classList.add('date-error-border');
                }
            }
        }

        /**
         * دالة لتفريغ جميع حقول الإدخال والنتائج وإعادة تعيين الحالات الافتراضية
         */
        function resetFields() {
            // 1. Inputs and Dates
            document.getElementById('salaryInput').value = '';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            document.getElementById('contractEndDate').value = '';
            document.getElementById('overtimeHoursPerDay').value = '';
            document.getElementById('holidayDays').value = '';
            document.getElementById('fridayDays').value = '';
            
            // 2. Checkboxes and Radios (set to default state: monthly checked, others unchecked)
            document.getElementById('monthly').checked = true;
            document.getElementById('daily').checked = false;
            document.getElementById('socialSecurity').checked = false;
            document.getElementById('arbitraryDismissal').checked = false;
            document.getElementById('fixedTerm').checked = false;
            document.getElementById('noticeCompensationEntitlement').checked = false;
            
            // Re-enable fixedTerm checkbox based on default (monthly)
            document.getElementById('fixedTerm').disabled = false;

            // Reset rate defaults (if changed by user)
            document.getElementById('overtimeRate').value = '125';
            document.getElementById('holidayRate').value = '150';
            document.getElementById('fridayRate').value = '150';
            
            // 3. Calculated Inputs and Display areas (hide and clear content)
            document.getElementById('contractEndDateInput').classList.add('hidden');
            document.getElementById('serviceDurationDisplay').classList.add('hidden');
            document.getElementById('remainingContractDurationDisplay').classList.add('hidden'); // New: Hide remaining contract duration
            document.getElementById('calculatedLeaveDaysDisplay').classList.add('hidden');
            document.getElementById('overtimeDaysPerYearDisplay').classList.add('hidden');
            
            document.getElementById('calculatedDuration').innerText = '';
            document.getElementById('calculatedRemainingDuration').innerText = ''; // New: Clear remaining contract duration
            document.getElementById('calculatedLeaveDays').value = '';
            document.getElementById('overtimeDaysPerYear').value = '';

            // 4. Results Section (hide all and clear text)
            const resultsDivs = [
                'serviceAward', 'dismissalCompensation', 'noticeMonthCompensation', 
                'leaveCompensation', 'overtimeCompensationDiv', 'holidayCompensationDiv', 
                'total', 'calculation-notes', 'error-message', 'message-box'
            ];
            
            resultsDivs.forEach(id => document.getElementById(id).classList.add('hidden'));

            document.getElementById('serviceAwardAmount').innerText = '';
            document.getElementById('dismissalCompensationAmount').innerText = '';
            document.getElementById('noticeMonthCompensationAmount').innerText = '';
            document.getElementById('leaveCompensationAmount').innerText = '';
            document.getElementById('overtimeCompensationAmount').innerText = '';
            document.getElementById('holidayCompensationAmount').innerText = '';
            document.getElementById('totalAmount').innerText = '';

            // Reset salary label to default monthly
            document.getElementById('salaryLabel').innerText = 'الراتب الشهري الأخير (دينار)';
            document.getElementById('salaryInput').placeholder = 'أدخل راتبك الشهري';
            
            // Remove date error class
            document.getElementById('startDate').classList.remove('date-error-border');
            document.getElementById('endDate').classList.remove('date-error-border');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        const MS_IN_DAY = 1000 * 60 * 60 * 24;
        const DAYS_IN_YEAR_LEAVE = 365; // تم التعديل إلى 365 كما طلب المستخدم

        function updateDurationAndLeaveAndOvertimeDisplay() {
            const startDateInput = document.getElementById('startDate');
            const endDateInput = document.getElementById('endDate');
            const startDateStr = startDateInput.value;
            const endDateStr = endDateInput.value;
            const contractEndDateStr = document.getElementById('contractEndDate').value;
            const fixedTermCheckbox = document.getElementById('fixedTerm');

            const serviceDurationDisplay = document.getElementById('serviceDurationDisplay');
            const calculatedDuration = document.getElementById('calculatedDuration');
            const calculatedLeaveDaysDisplay = document.getElementById('calculatedLeaveDaysDisplay');
            const calculatedLeaveDaysInput = document.getElementById('calculatedLeaveDays');
            const overtimeDaysPerYearDisplay = document.getElementById('overtimeDaysPerYearDisplay');
            const overtimeDaysPerYearInput = document.getElementById('overtimeDaysPerYear');
            
            const remainingContractDurationDisplay = document.getElementById('remainingContractDurationDisplay');
            const calculatedRemainingDuration = document.getElementById('calculatedRemainingDuration');

            remainingContractDurationDisplay.classList.add('hidden');
            calculatedRemainingDuration.innerText = '';

            if (startDateStr && endDateStr) {
                const startDate = new Date(startDateStr);
                const endDate = new Date(endDateStr);

                // --- التحقق من صحة التواريخ (تاريخ النهاية يجب أن يكون بعد تاريخ البداية) ---
                if (startDate > endDate) {
                    
                    // إخفاء نتائج المدة المحتسبة عند وجود خطأ
                    serviceDurationDisplay.classList.add('hidden');
                    calculatedLeaveDaysDisplay.classList.add('hidden');
                    overtimeDaysPerYearDisplay.classList.add('hidden');
                    remainingContractDurationDisplay.classList.add('hidden'); 
                    return; // التوقف عن الحساب إذا كانت التواريخ غير صالحة
                }
                // --- نهاية التحقق من صحة التواريخ ---
                
                const duration = calculateDuration(startDateStr, endDateStr);
                
                if (duration.years >= 0 && duration.months >= 0 && duration.days >= 0 && (duration.years > 0 || duration.months > 0 || duration.days > 0)) {
                    serviceDurationDisplay.classList.remove('hidden');
                    calculatedDuration.innerText = `${duration.years} سنة و ${duration.months} شهر و ${duration.days} يوم`;
                    
                    // --- منطق احتساب المدة المتبقية في العقد (جديد) ---
                    if (fixedTermCheckbox.checked && contractEndDateStr) {
                        const employmentEndDate = new Date(endDateStr);
                        const contractEndDate = new Date(contractEndDateStr);
                        
                        // يجب أن يكون تاريخ نهاية العقد بعد تاريخ نهاية الخدمة للاستحقاق
                        if (contractEndDate > employmentEndDate) {
                            // نستخدم endDateStr و contractEndDateStr لحساب الفرق بالسنوات والأشهر والأيام
                            const remainingDuration = calculateDuration(endDateStr, contractEndDateStr);
                            
                            remainingContractDurationDisplay.classList.remove('hidden');
                            calculatedRemainingDuration.innerText = 
                                `${remainingDuration.years} سنة و ${remainingDuration.months} شهر و ${remainingDuration.days} يوم`;
                        } else {
                            // إخفاء إذا لم يكن هناك مدة متبقية
                            remainingContractDurationDisplay.classList.add('hidden');
                        }
                    }

                    // --- منطق احتساب الإجازات المحدث (حسب مدة الخدمة ومجموع سنتين كحد أقصى) ---
                    const T_start_date = new Date(startDateStr);
                    const T_end_date = new Date(endDateStr);
                    const D_service = (T_end_date - T_start_date) / MS_IN_DAY; // مجموع أيام الخدمة الفعلية

                    // 1. نقطة التحول: تاريخ إكمال 4 سنوات (بداية السنة الخامسة)
                    const T_4y_date = new Date(T_start_date);
                    T_4y_date.setFullYear(T_start_date.getFullYear() + 4);

                    // 2. تاريخ بداية فترة التعويض (سنتان قبل تاريخ النهاية)
                    const T_2y_date = new Date(T_end_date);
                    T_2y_date.setFullYear(T_end_date.getFullYear() - 2);

                    // 3. التاريخ الفعلي لبدء فترة التعويض (الأبعد بين تاريخ البدء الفعلي وتاريخ سنتين للوراء)
                    const T_comp_start_time = Math.max(T_start_date.getTime(), T_2y_date.getTime());
                    
                    let daysAt14Rate = 0; // الأيام التي تستحق 14 يومًا في آخر سنتين (قبل إكمال 4 سنوات)
                    let daysAt21Rate = 0; // الأيام التي تستحق 21 يومًا في آخر سنتين (منذ إكمال 4 سنوات فصاعداً)

                    // الفترة المستحقة لـ 14 يومًا تنتهي عند T_4y_date
                    const T_14_end_time = Math.min(T_end_date.getTime(), T_4y_date.getTime());

                    if (T_comp_start_time < T_14_end_time) {
                        // حساب الأيام المستحقة لـ 14 يومًا: من بدء التعويض حتى 4 سنوات (أو نهاية الخدمة، أيهما أقرب)
                        daysAt14Rate = (T_14_end_time - T_comp_start_time) / MS_IN_DAY;
                    }

                    // الفترة المستحقة لـ 21 يومًا تبدأ من T_4y_date
                    const T_21_start_time = Math.max(T_comp_start_time, T_4y_date.getTime());

                    if (T_21_start_time < T_end_date.getTime()) {
                        // حساب الأيام المستحقة لـ 21 يومًا: من 4 سنوات (أو بدء التعويض، أيهما أبعد) حتى نهاية الخدمة
                        daysAt21Rate = (T_end_date.getTime() - T_21_start_time) / MS_IN_DAY;
                    }

                    let totalDeservedLeaveDays = 0;

                    if (D_service > 0) {
                        // استخدام 365 يوماً في السنة (حسب الطلب)
                        const LEAVE_DAYS_PER_YEAR = 365; 
                        
                        const leaveFrom14 = daysAt14Rate * (14 / LEAVE_DAYS_PER_YEAR);
                        const leaveFrom21 = daysAt21Rate * (21 / LEAVE_DAYS_PER_YEAR);
                        
                        totalDeservedLeaveDays = leaveFrom14 + leaveFrom21;
                    }
                    
                    // تطبيق التقريب لأقرب عدد صحيح (حسب الطلب)
                    const roundedLeaveDays = Math.round(totalDeservedLeaveDays);
                    
                    // --- نهاية منطق احتساب الإجازات المحدث ---

                    if (roundedLeaveDays > 0) {
                        calculatedLeaveDaysDisplay.classList.remove('hidden');
                        calculatedLeaveDaysInput.value = roundedLeaveDays;
                    } else {
                        calculatedLeaveDaysDisplay.classList.add('hidden');
                        calculatedLeaveDaysInput.value = '';
                    }

                    // حساب عدد الأيام الإجمالي في مدة الخدمة بحد أقصى سنتين لغرض تقدير العمل الإضافي
                    const maxOvertimeDays = 2 * 365;
                    const overtimeDaysInTwoYears = Math.min(maxOvertimeDays, D_service);
                    
                    // نقوم بعرض عدد الأيام التي يستحق عنها العامل البدل بحد أقصى سنتين
                    if (overtimeDaysInTwoYears > 0) {
                        overtimeDaysPerYearDisplay.classList.remove('hidden');
                        overtimeDaysPerYearInput.value = overtimeDaysInTwoYears.toFixed(0);
                    } else {
                        overtimeDaysPerYearDisplay.classList.add('hidden');
                        overtimeDaysPerYearInput.value = '';
                    }

                } else {
                    serviceDurationDisplay.classList.add('hidden');
                    calculatedLeaveDaysDisplay.classList.add('hidden');
                    overtimeDaysPerYearDisplay.classList.add('hidden');
                }
            } else {
                serviceDurationDisplay.classList.add('hidden');
                calculatedLeaveDaysDisplay.classList.add('hidden');
                overtimeDaysPerYearDisplay.classList.add('hidden');
                remainingContractDurationDisplay.classList.add('hidden'); // إخفاء عند عدم إدخال التواريخ
            }
        }

        function showResults() {
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        /**
         * تحسب فرق التاريخ بالسنوات والأشهر والأيام بدقة (حسب التقويم الميلادي).
         * @param {string} startDateStr - تاريخ البداية (YYYY-MM-DD).
         * @param {string} endDateStr - تاريخ النهاية (YYYY-MM-DD).
         * @returns {object} - يحتوي على سنوات وأشهر وأيام الخدمة.
         */
        function calculateDuration(startDateStr, endDateStr) {
            const startDate = new Date(startDateStr);
            const endDate = new Date(endDateStr);

            if (startDate > endDate) {
                return { years: -1, months: -1, days: -1 };
            }

            let years = endDate.getFullYear() - startDate.getFullYear();
            let months = endDate.getMonth() - startDate.getMonth();
            let days = endDate.getDate() - startDate.getDate();

            if (days < 0) {
                // اقتراض يوم من الشهر السابق
                months--;
                // تحديد عدد أيام الشهر السابق الفعلي (صفر لليوم يعطي آخر يوم في الشهر السابق)
                const prevMonth = new Date(endDate.getFullYear(), endDate.getMonth(), 0);
                days += prevMonth.getDate(); 
            }

            if (months < 0) {
                // اقتراض شهر من السنة السابقة
                years--;
                months += 12;
            }

            return { years, months, days };
        }

        /**
         * دالة لعرض رسالة في صندوق رسائل مخصص في الأسفل
         * @param {string} message - محتوى الرسالة
         */
        function showMessageBox(message, isError = false) {
            const messageBox = document.getElementById('message-box');
            const errorMessage = document.getElementById('error-message');
            
            // إخفاء كلاهما أولاً
            messageBox.classList.add('hidden');
            errorMessage.classList.add('hidden');

            if (isError) {
                errorMessage.innerText = message;
                errorMessage.classList.remove('hidden');
                messageBox.classList.add('hidden');
            } else {
                messageBox.innerText = message;
                // تغيير لون خلفية الرسالة العادية لجعلها مميزة
                messageBox.classList.remove('bg-blue-100', 'text-blue-700');
                messageBox.classList.add('bg-green-100', 'text-green-700'); 
                messageBox.classList.remove('hidden');
                errorMessage.classList.add('hidden');
            }
            showResults();
        }

        function calculateRights() {
            const startDateStr = document.getElementById('startDate').value;
            const endDateStr = document.getElementById('endDate').value;
            const contractEndDateStr = document.getElementById('contractEndDate').value; // جلب تاريخ نهاية العقد
            const startDateInput = document.getElementById('startDate');
            const endDateInput = document.getElementById('endDate');
            
            // 1. إجراء التحقق من الصحة وتطبيق الحدود فور الضغط على زر الحساب
            checkDateValidityAndDisplay();

            // إخفاء رسائل الخطأ والتنبيه السابقة
            document.getElementById('error-message').classList.add('hidden');
            document.getElementById('message-box').classList.add('hidden');
            

            if (!startDateStr || !endDateStr) {
                showMessageBox('الرجاء إدخال تاريخ بداية العمل وتاريخ نهاية العمل.', true);
                return;
            }

            const duration = calculateDuration(startDateStr, endDateStr);
            
            // 2. التحقق من وجود حدود خطأ مطبقة، وفي هذه الحالة نوقف الحساب
            if (startDateInput.classList.contains('date-error-border') || endDateInput.classList.contains('date-error-border')) {
                 showMessageBox('تاريخ نهاية الخدمة يجب أن يكون بعد تاريخ بداية الخدمة.', true);
                return;
            }

            const totalServiceDays = (new Date(endDateStr) - new Date(startDateStr)) / (1000 * 60 * 60 * 24);
            const serviceYearsForDismissal = totalServiceDays / 365; // يستخدم 365 لتطبيق معادلة الفصل التعسفي حسب طلب المستخدم
            
            const serviceDurationDisplay = document.getElementById('serviceDurationDisplay');
            const calculatedDuration = document.getElementById('calculatedDuration');
            serviceDurationDisplay.classList.remove('hidden');
            calculatedDuration.innerText = `${duration.years} سنة و ${duration.months} شهر و ${duration.days} يوم`;

            const salaryType = document.querySelector('input[name="salaryType"]:checked').value;
            const salaryInputValue = parseFloat(document.getElementById('salaryInput').value);
            
            if (isNaN(salaryInputValue) || salaryInputValue <= 0) {
                showMessageBox('الرجاء إدخال راتب أو أجر صحيح.', true);
                return;
            }

            let monthlySalary = 0;
            let dailySalary = 0;
            
            const calculationNotesDiv = document.getElementById('calculation-notes');
            const dailyWageNote = document.getElementById('daily-wage-note');
            const dailyAwardNote = document.getElementById('daily-award-note');
            calculationNotesDiv.classList.add('hidden');
            dailyWageNote.classList.add('hidden');
            dailyAwardNote.classList.add('hidden');

            if (salaryType === 'monthly') {
                monthlySalary = salaryInputValue;
                dailySalary = monthlySalary / 30; // الأجر اليومي = الراتب الشهري / 30
            } else { // 'daily'
                dailySalary = salaryInputValue;
                // راتب شهري تقديري لأغراض الفصل التعسفي وبدل شهر الإشعار
                monthlySalary = dailySalary * 30; 
                calculationNotesDiv.classList.remove('hidden');
                dailyWageNote.classList.remove('hidden');
            }

            const isSocialSecurity = document.getElementById('socialSecurity').checked;
            const isArbitraryDismissal = document.getElementById('arbitraryDismissal').checked;
            const isFixedTerm = document.getElementById('fixedTerm').checked;
            const isEntitledToNotice = document.getElementById('noticeCompensationEntitlement').checked; 
            
            let remainingMonths = 0;
            
            if (isFixedTerm && contractEndDateStr) {
                const workEndDate = new Date(endDateStr);
                const contractEndDate = new Date(contractEndDateStr);
                
                // يجب أن يكون نهاية العقد بعد تاريخ نهاية الخدمة لاحتساب البدل
                if (contractEndDate > workEndDate) {
                    const diffTime = Math.abs(contractEndDate - workEndDate);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    remainingMonths = diffDays / 30; // حساب الأشهر المتبقية (بافتراض 30 يوماً للشهر)
                }
            }

            const overtimeHoursPerDay = parseFloat(document.getElementById('overtimeHoursPerDay').value) || 0;
            const overtimeDays = parseFloat(document.getElementById('overtimeDaysPerYear').value) || 0; 
            const holidayDays = parseInt(document.getElementById('holidayDays').value) || 0;
            const fridayDays = parseInt(document.getElementById('fridayDays').value) || 0;
            
            const overtimeRate = parseFloat(document.getElementById('overtimeRate').value) || 125;
            const holidayRate = parseFloat(document.getElementById('holidayRate').value) || 150;
            const fridayRate = parseFloat(document.getElementById('fridayRate').value) || 150;

            let totalCompensation = 0;
            const serviceAwardDiv = document.getElementById('serviceAward');
            const dismissalCompensationDiv = document.getElementById('dismissalCompensation');
            const noticeMonthCompensationDiv = document.getElementById('noticeMonthCompensation');
            const leaveCompensationDiv = document.getElementById('leaveCompensation');
            const overtimeCompensationDiv = document.getElementById('overtimeCompensationDiv');
            const holidayCompensationDiv = document.getElementById('holidayCompensationDiv');
            const totalDiv = document.getElementById('total');
            const calculatedLeaveDaysDisplay = document.getElementById('calculatedLeaveDaysDisplay');

            // Reset visibility
            serviceAwardDiv.classList.add('hidden');
            dismissalCompensationDiv.classList.add('hidden');
            noticeMonthCompensationDiv.classList.add('hidden');
            leaveCompensationDiv.classList.add('hidden');
            overtimeCompensationDiv.classList.add('hidden');
            holidayCompensationDiv.classList.add('hidden');
            totalDiv.classList.add('hidden');

            // 1. End of Service Award (مكافأة نهاية الخدمة)
            let serviceAward = 0;
            if (!isSocialSecurity) {
                serviceAwardDiv.classList.remove('hidden');
                
                // حساب عدد أيام كسور السنة الفعلية
                const startDateFraction = new Date(new Date(startDateStr));
                startDateFraction.setFullYear(startDateFraction.getFullYear() + duration.years);
                // استخدام Math.ceil لضمان احتساب اليوم الأول والأخير
                const fractionalDaysTotal = Math.ceil((new Date(endDateStr) - startDateFraction) / (1000 * 60 * 60 * 24)); 
                
                if (salaryType === 'daily') {
                    // الاحتساب لعمال الأجر اليومي: (الأجر اليومي × 30 × عدد سنوات الخدمة الكاملة) + (الأجر اليومي × عدد أيام كسور السنة الفعلية)
                    const fullYearsAward = duration.years * (dailySalary * 30);
                    const fractionalAward = fractionalDaysTotal * dailySalary;
                    
                    serviceAward = fullYearsAward + fractionalAward;
                    dailyAwardNote.classList.remove('hidden');
                } else { // 'monthly'
                    // للراتب الشهري: راتب شهر عن كل سنة + راتب نسبي عن كسور السنة
                    const fullYearsAward = monthlySalary * duration.years;
                    
                    // حساب المكافأة لكسور السنة على أساس الراتب الشهري مقسومًا على 365
                    const fractionalAward = (monthlySalary / 365) * fractionalDaysTotal;

                    serviceAward = fullYearsAward + fractionalAward;
                }
                
                document.getElementById('serviceAwardAmount').innerText = `${serviceAward.toFixed(2)} دينار`;
                totalCompensation += serviceAward;
            }

            // 2. Arbitrary Dismissal Compensation (بدل الفصل التعسفي)
            let dismissalCompensation = 0;

            if (isArbitraryDismissal && !isFixedTerm) {
                dismissalCompensationDiv.classList.remove('hidden');

                // Logic for indefinite contract: (Monthly Salary / 2) * Service Years (based on 365 days), minimum 2 months salary
                const calculatedAmount = (monthlySalary / 2) * serviceYearsForDismissal; // **تطبيق المعادلة بـ 365 يوم**
                dismissalCompensation = Math.max(calculatedAmount, monthlySalary * 2);
                document.getElementById('dismissalCompensationAmount').innerText = `${dismissalCompensation.toFixed(2)} دينار`;
                totalCompensation += dismissalCompensation;

            } else if (isFixedTerm && remainingMonths > 0) {
                dismissalCompensationDiv.classList.remove('hidden');
                // Logic for fixed-term contract: Monthly salary * remaining months
                dismissalCompensation = monthlySalary * remainingMonths;
                document.getElementById('dismissalCompensationAmount').innerText = `${dismissalCompensation.toFixed(2)} دينار`;
                totalCompensation += dismissalCompensation;
                
                // إضافة رسالة منبثقة بسيطة لتوضيح المدة المتبقية المحتسبة
                // showMessageBox(`تم احتساب بدل الفصل التعسفي على أساس ${remainingMonths.toFixed(2)} شهراً متبقياً من العقد المحدد المدة.`);
            }

            // 2.5. Notice Month Compensation (بدل شهر الإشعار)
            let noticeMonthCompensation = 0;
            if (isEntitledToNotice) {
                noticeMonthCompensationDiv.classList.remove('hidden');
                // يستخدم هنا الراتب الشهري المقدر (dailySalary * 30)
                noticeMonthCompensation = monthlySalary; 
                document.getElementById('noticeMonthCompensationAmount').innerText = `${noticeMonthCompensation.toFixed(2)} دينار`;
                totalCompensation += noticeMonthCompensation;
            }


            // 3. Unused Annual Leave (بدل الإجازات السنوية)
            // نأخذ القيمة من حقل الإدخال بعد التقريب أو التعديل من قبل المستخدم
            const unusedLeaveDays = parseFloat(document.getElementById('calculatedLeaveDays').value) || 0; 
            let leaveCompensation = 0;
            if (unusedLeaveDays > 0) {
                leaveCompensationDiv.classList.remove('hidden');
                calculatedLeaveDaysDisplay.classList.remove('hidden');
                
                // المعادلة: (مجموع أيام الإجازات المستحقة) × (الأجر اليومي)
                // الأجر اليومي هو المعتمد سواء كان الراتب شهرياً أو يومياً
                leaveCompensation = dailySalary * unusedLeaveDays; 
                document.getElementById('leaveCompensationAmount').innerText = `${leaveCompensation.toFixed(2)} دينار`;
                totalCompensation += leaveCompensation;
            }

            // 4. Overtime Compensation (بدل العمل الإضافي)
            let overtimeCompensation = 0;
            const overtimeHours = parseFloat(document.getElementById('overtimeHoursPerDay').value) || 0;
            
            if (overtimeHours > 0 && overtimeDays > 0) {
                overtimeCompensationDiv.classList.remove('hidden');
                // أجر الساعة: الأجر اليومي / 8
                const hourlySalary = dailySalary / 8; 
                // الحساب: مجموع الساعات (ساعات باليوم * أيام خلال سنتين) * أجر الساعة * نسبة العمل الإضافي
                // المعادلة: (ساعات إضافية يومية * أيام عمل إضافي) * (أجر الساعة) * 125%
                overtimeCompensation = overtimeHours * overtimeDays * hourlySalary * (overtimeRate / 100);
                document.getElementById('overtimeCompensationAmount').innerText = `${overtimeCompensation.toFixed(2)} دينار`;
                document.getElementById('overtimeRateDisplay').innerText = overtimeRate + '%';
                totalCompensation += overtimeCompensation;
            }

            // 5. Holiday and Friday Compensation (بدل دوام العطل والأعياد وأيام الجمع)
            let holidayCompensation = 0;
            if (holidayDays > 0 || fridayDays > 0) {
                holidayCompensationDiv.classList.remove('hidden');
                
                // الحساب: (أيام العطل * الأجر اليومي * نسبة العطل) + (أيام الجمع * الأجر اليومي * نسبة الجمع)
                // هذا يحسب البدل الإضافي (الـ 150%) فقط، وهو المطلوب بالإضافة إلى الأجر الأساسي المدفوع.
                holidayCompensation = (holidayDays * dailySalary * (holidayRate / 100)) + (fridayDays * dailySalary * (fridayRate / 100));
                document.getElementById('holidayCompensationAmount').innerText = `${holidayCompensation.toFixed(2)} دينار`;
                document.getElementById('holidayRateDisplay').innerText = holidayRate + '%';
                document.getElementById('fridayRateDisplay').innerText = fridayRate + '%';
                totalCompensation += holidayCompensation;
            }

            // Show total if any compensation is calculated
            if (totalCompensation > 0) {
                totalDiv.classList.remove('hidden');
                document.getElementById('totalAmount').innerText = `${totalCompensation.toFixed(2)} دينار`;
            } else {
                showMessageBox('لا توجد مستحقات بناءً على المعلومات المدخلة.', false);
            }
            
            showResults();
        }
    </script>
</body>
</html>
